Документация за проекта "MARVEL Universe Database"
1. Въведение
Проектът представлява база данни, която съхранява информация за героите, филмите, отборите, галактиките и други елементи от вселената на Marvel. Основната цел е да предостави структурирана информация за връзките между различни елементи, както и функции за анализиране на данните. Стойностите в таблиците са генерирани.
2. Структура на базата данни
2.1 Схема: MARVEL
Таблици и връзки:
MARVEL_HEROES


Съхранява информация за героите на Marvel.
Тип връзка: MARVEL_HEROES е свързана по "one-to-many" с MARVEL_HERO_MOVIES и MARVEL_HERO_POWERS.
Колони:
HERO_ID (INT, PK): Уникален идентификатор за героя.
HERO_NAME (VARCHAR): Име на героя.
HERO_REAL_NAME (VARCHAR): Истинско име на героя.
HERO_ORIGIN (VARCHAR): Произход на героя.
HERO_FIRST_APPEARENCE (YEAR): Година на първа поява.
HERO_PLANET (VARCHAR): Планета на героя.
HERO_AGE (INT): Възраст на героя.
Снимка на част от таблицата:


MARVEL_MOVIES


Съхранява информация за филмите от вселената на Marvel.
Тип връзка: MARVEL_MOVIES е свързана по "one-to-many" с MARVEL_HERO_MOVIES и MARVEL_MOVIE_PREMIERE_SCREENINGS.
Колони:
MOVIE_ID (INT, PK): Уникален идентификатор за филма.
MOVIE_TITLE (VARCHAR): Заглавие на филма.
MOVIE_RELEASE_DATE (DATE): Дата на премиера.
MOVIE_RATING (INT): Рейтинг на филма (по скала от 1 до 10).
MOVIE_BUDGET (DECIMAL): Бюджет на филма.
MOVIE_BOX_OFFICE (DECIMAL): Приходи от филма.
Снимка на част от таблицата:


MARVEL_HERO_MOVIES


Свързва героите с филмите, в които участват.
Тип връзка: MARVEL_HERO_MOVIES е "many-to-many" връзка между MARVEL_HEROES и MARVEL_MOVIES.
Колони:
HERO_ID (INT, FK): Идентификатор на героя.
MOVIE_ID (INT, FK): Идентификатор на филма.
Снимка на част от таблицата:

MARVEL_HERO_TEAMS


Съхранява информация за отборите на Marvel.
Колони:
TEAM_ID (INT, PK): Уникален идентификатор за отбора.
TEAM_NAME (VARCHAR): Име на отбора.
TEAM_FORMATION_DATE (DATE): Дата на създаване.
Снимка на част от таблицата:

MARVEL_HERO_TEAMS_LEADERS


Свързва отборите с техните лидери.
Тип връзка: MARVEL_HERO_TEAMS_LEADERS е "one-to-many" връзка между MARVEL_HERO_TEAMS и MARVEL_HEROES.
Колони:
TEAM_ID (INT, FK): Идентификатор на отбора.
HERO_ID (INT, FK): Идентификатор на героя.
Снимка на част от таблицата:

MARVEL_HERO_POWERS


Съхранява информация за суперсилите на героите.
Колони:
HERO_ID (INT, FK): Идентификатор на героя.
POWER_NAME (VARCHAR): Име на суперсилата.
Снимка на част от таблицата:

MARVEL_PLANETS_GALAXIES


Съхранява информация за планетите и галактиките.
Тип връзка: MARVEL_PLANETS_GALAXIES е "one-to-one" връзка с MARVEL_HEROES.
Колони:
PLANET_NAME (VARCHAR, PK): Име на планетата.
GALAXY_NAME (VARCHAR): Име на галактиката.
HERO_ID (INT, FK): Идентификатор на героя.
Снимка на част от таблицата:

MARVEL_MOVIE_PREMIERE_SCREENINGS


Съхранява информация за премиерните прожекции на филмите.
Колони:
MOVIE_ID (INT, FK): Идентификатор на филма.
SCREENING_DATE (DATE): Дата на прожекцията.
DAILY_BOX_OFFICE (DECIMAL): Дневни приходи.
Снимка на част от таблицата:

3. Функции, транзакции и изгледи
3.1 Функции:
UDF_GET_MOVIE_BUDGET_LEVEL


Описание: Определя нивото на бюджета на даден филм ("Нисък", "Стандартен" или "Висок") на базата на стойността на бюджета.	Нисък: <100 000 000$							Стандартен: 100 000 000$ < бюджет > 200 000 000$			Виско: > 200 000 000$
Вход:
MOVIE_BUDGET (DECIMAL): Бюджетът на филма.
Изход:
VARCHAR(10): Ниво на бюджета.

UDF_GET_MOVIE_PROFIT_DAY


Описание: Намира първия ден, в който приходите от прожекции надвишават бюджета на филма.
Вход:
MOVIE_ID (INT): Уникален идентификатор на филма.
Изход:
DATE: Дата на първия ден с приходи над бюджета.
UDF_GET_MOST_POPULAR_POWER


Описание: Връща най-често срещата суперсила.
Вход:
HERO_ID (INT): Уникален идентификатор на героя.
Изход:
VARCHAR(100): Най-често срещаната суперсила.
UDF_TOTAL_BOX_OFFICE_BY_HERO


Описание: Изчислява общите приходи от филми, в които е участвал даден герой.
Вход:
HERO_ID (INT): Уникален идентификатор на героя.
Изход:
DECIMAL(15,2): Общи приходи от филмите на героя.
3.2 Транзакции:
Добавяне на нов филм и герои към него:


Описание: Добавя нов филм и съответните герои към него. Включва създаване на два savepoint-а и възможност за връщане към начално състояние.
Действия:
Създаване на филм в таблицата MARVEL_MOVIES.
Добавяне на връзки към героите в MARVEL_HERO_MOVIES.
Механика:
Използва SAVEPOINT NO_CHANGES и SAVEPOINT INSERTED_MOVIE.
Изпълнява ROLLBACK TO NO_CHANGES при нужда.
Изтриване на прожекции и филм:


Описание: Изтрива записи за премиерните прожекции на филм и самия филм, с възможност за връщане към началното състояние. Включва създаване на два savepoint-а и възможност за връщане към начално състояние.


Действия:
Изтриване на записи от MARVEL_MOVIE_PREMIERE_SCREENINGS.
Изтриване на съответния запис от MARVEL_MOVIES.
Механика:
Използва SAVEPOINT NO_CHANGES и SAVEPOINT DELETED_PREMIERE_SCREENING.
Изпълнява ROLLBACK TO NO_CHANGES при нужда.
3.3 Изгледи (views):
VIEW_MOVIE_BUDGET_LEVEL


Описание: Показва нивото на бюджета за всички филми, базирано на функцията UDF_GET_MOVIE_BUDGET_LEVEL.
Колони:
Име на филма: Заглавието на филма.
Бюджет на филма: Бюджетът на филма, форматиран със знак "$".
Ниво на бюджета: Нивото на бюджета ("Нисък", "Стандартен", "Висок").
Снимка на изгледа:

VIEW_MOVIE_PROFIT_DAY


Описание: Показва деня с приходи над бюджета за всеки филм, ако такъв ден съществува.
Колони:
ID на филма: Уникален идентификатор на филма.
Име на филма: Заглавие на филма.
Бюджет: Бюджет на филма.
Ден с приходи над бюджета: Дата на първия ден с приходи над бюджета.
Снимка на изгледа:

VIEW_MOST_POPULAR_POWER


Описание: Показва най-често срещаната суперсила за всеки герой.
Колони:
Най-често срещана сила: Името на суперсилата.
Име на героя, който я притежава: Името на героя.
Снимка на изгледа:

VIEW_TOTAL_BOXOFFICE_BY_HERO


Описание: Показва общите приходи от филмите за всеки герой, използвайки функцията UDF_TOTAL_BOX_OFFICE_BY_HERO.
Колони:
Име на героя: Името на героя.
Общи приходи от филми: Общи приходи, форматирани със знак "$".
Снимка на изгледа






4. Заявки
1. Извличане на филми с рейтинг над 7


2. Извличане на отбори и техните лидери



3. Извличане на герои и филмите, в които участват

4. Подреждане на героите по възраст (низходящо)

5. Средна възраст на героите от Земята

6. Филми с приходи над 1 милиард

7. Топ 5 герои с най-много филми

8. Галактикa-планета-герой от планетата

9. Среден бюджет на филми по години

10. Филми след 2015




